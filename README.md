# Проект: Локальный автоуточнитель уголков для проективно искажённых штрих‑/QR‑кодов

Этот репозиторий сфокусирован на задаче локального автоуточнения четырёх углов прямоугольной области (quad) перед нормализацией/приведением перспективы. В нём:

- Реализован модуль автоуточнения углов и единым API.
- Добавлены скрипты для локального запуска, визуализаций и сравнения методов.
- Подготовлены конфиги и данные.

## Установка

- Требования: Python 3.10+.
- Установка зависимостей:

```
uv pip install -e .
```

## Структура

- `src/barcode_refiner/geometry.py` — геометрические утилиты: упорядочивание углов, гомографии, IoU, отрисовка quad.
- `src/barcode_refiner/refine.py` — автоуточнение углов: `refine_corners(image, pts, config)`.
- `src/barcode_refiner/viz.py` — визуализация quad и легенд.
- `src/barcode_refiner/eval.py` — метрики и помощники для оценки.
- `src/barcode_refiner/scripts/*` — CLI: `refine-image`, `evaluate-refiners`.
- `configs/*` — примеры конфигов для запуска.
- `images/*` — примеры входных изображений.
- `results/*` — папка для результатов (создаётся скриптами).
- `models/*` - папка для моделей

## Быстрый старт

1) Оценка метода с результатами и визуализациями:

```
make eval-detector
```

- Дополнительно, чтобы получить наглядные подборки лучших/худших кейсов:

```
make report-markup
```

Результаты сохраняются в `results/`.

2) Локальное автоуточнение для одного изображения и исходного quad:

```
refine-image --image images/qr.png --points "10,10 200,20 210,210 20,200" --method edge --out results/single
```
